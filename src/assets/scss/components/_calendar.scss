@use '@/assets/scss/utils/variables' as *;
@use '@/assets/scss/utils/mixins' as *;

.calendar {
	position: relative;
	width: 100%;
	min-width: 240px;
	max-width: 560px;
	margin: 0 auto;
	border-radius: 6px;
	box-shadow: 0 2px 10px $calendar-shadow;

	&__background {
		position: absolute;
		inset: 0;
		width: 100%;
		height: 100%;
		background: url('/images/alpaca@1.5x.png') no-repeat center/cover;
		z-index: 1;
		border-radius: inherit;
	}

	&__overlay {
		width: 100%;
		height: 100%;
		background-color: $calendar-overlay;
		border-radius: inherit;
	}

	&__content {
		position: relative;
		z-index: 2;
		color: $calendar-text;
		border-radius: inherit;
		width: 100%;
		min-width: 240px;
		max-width: 560px;
	}

	&__header {
		display: flex;
		justify-content: space-between;
		text-align: center;
		align-items: center;
		padding: 8px 8px;
		margin-bottom: 8px;
	}

	&__btn {
		background: none;
		color: white;
		border: none;
		cursor: pointer;
		font-size: 0;
		@include hover-supported {
			background: $hover-supported-color;
			border-radius: 8px;
		}
	}

	&__btn svg {
		fill: var(--calendar-arrow);
	}

	&__btn--prev svg {
		transform: rotate(180deg);
	}

	&__title {
		display: flex;
		align-items: flex-start;
		justify-content: center;
		gap: 8px;
	}

	&__month {
		font-size: $font-size-base;
		text-transform: uppercase;
		font-weight: normal;
	}

	&__days {
		display: flex;
		flex-wrap: wrap;
		justify-content: center;
		align-items: flex-start;
		width: 100%;
		min-width: 240px;
		max-width: 560px;
		margin: 0;
		overflow: hidden;
	}
}

.calendar__day {
	width: calc(100% / 7);
	aspect-ratio: 1 / 1;
	height: auto;
	margin: 0;
	display: flex;
	align-items: center;
	justify-content: flex-start;
	gap: 0px;
	cursor: pointer;

	&.calendar__day--in-range {
		position: relative;

		& span {
			position: relative;
			z-index: 1;
			color: var(--calendar-text);
			background: var(--calendar-range);
		}
	}

	&.calendar__day--range-start span {
		display: flex;
		justify-self: flex-end;
		transform: translateX(clamp(8px, 3.29vw, 32px));
		background-size: cover;
		background-repeat: no-repeat;
		background-position: center;
	}

	&.calendar__day--range-end span {
		background-size: cover;
		background-repeat: no-repeat;
		background-position: center;
	}

	&.calendar__day--range-start span,
	&.calendar__day--range-end span {
		background-color: transparent !important;
		width: clamp(24px, 11.2vw, 60px);
		height: clamp(24px, 11.2vw, 60px);
		position: relative;
		color: var(--calendar-text);
		box-shadow: none;
	}

	&.calendar__day--selected span {
		background-size: cover;
		background-repeat: no-repeat;
		background-position: center;
		width: clamp(24px, 11vw, 60px);
		height: clamp(24px, 11vw, 60px);
		color: var(--calendar-text);
	}

	& span {
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0;
		padding: 0;
		width: 100%;
		height: auto;
		font-size: $font-size-base;
	}
}

.calendar__day.calendar__day--in-range span {
	position: relative;
	cursor: pointer;
	z-index: 1;
	color: var(--calendar-text);
	background: var(--calendar-range);
	background-size: cover;
	background-repeat: no-repeat;
	background-position: center;
	height: clamp(24px, 11vw, 60px);
}

.calendar__day--other-month {
	color: $calendar-opacity;
}

.calendar__btn--next,
.calendar__btn--prev {
	@include hover-supported {
		body.light & {
			background: var(--calendar-arrow-hover);
		}
	}
}

.calendar__range-svg::before {
	content: '';
	position: absolute;
	top: 0;
	left: -4px;
	width: calc(100% + 8px);
	height: 100%;
	background-image: var(--range-svg);
	background-size: 100% 100%;
	background-repeat: no-repeat;
	background-position: center;
	z-index: 0;
	pointer-events: none;
}
